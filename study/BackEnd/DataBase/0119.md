DATA관리

Docker Desktop
Maria DB
HeidiSQL
(얘네는 원하는 어플리케이션 사용 가능)

HeidiSQL 단축키
새로고침f5
쿼리 실행 f9
현재 줄만 실행 ctrl + shift + f9

db에 
테이블 항목에 보면
TABLES, COLUMNS가 있음
TABLES의 COL들을 모아놓은 테이블이 COLUMNS. 부모 자식의 관계라고 볼 수 있음


우리가 보는 테이블이 물리데이터모델임
논리는 보통 코멘트에 적어주기도 함(데이터의 정보, 컬럼명의 정의 등을 적어줌)
코멘트를 통해 논리 - 물리 매치시켜줄 수 있음

컬럼명은 보통 snack형식으로 적혀있음(ex) dept_no)
카멜도 가능은 하지만 보통 스네이크로 씀
물리는 풀네임보다는 축약해서 씀
논리는 사용자가 이해하기 쉽도록 풀네임으로 적음(장문)

물리는 컴퓨터가 읽기 위한용, 논리/개념은 사람이 읽기 위한용
논리-물리는 1:1로 매칭되어있음


스키마
- 데이터를 담은 그릇이 모여있는 메타정보
- DB 속성 = 어떻게 저장할 것인지에 대한 표현방식
- 도메인이라고 부르기도 함(도메인은 특정 서비스를 하는 기능적인 부분인데 그렇게 말하는 사람도 있음)
도메인
네이버로 치면
치치직, 블로그, 카페 등등으로 나눠져있는 항목들을 한번에 묶어 도메인
-뷰, 프로시저, 트리거 등도 스키마가 관리함

뷰
테이블 자체를 가져오는 것 보다 느림
내가 요청할 때 마다 셀렉을 만들어 가져오기 때문에 오래걸림
-> 오라클에서 M view로 이 뷰를 테이블화 시켜 저장시켜둠. 그래서 빠르게 가져올 수 있음
뷰는 결과를 저장하지 않고, “쿼리 자체를 이름으로 저장”해 두는 것
<!-- 공통코드를 가져올 때 사용
적은 데이터(남자인지 여자인지)를 관리할 때 사용함 -->

1️⃣ 보안이 필요할 때
```
사용자 테이블
id | name | email | password | salary
```
일반 직원은 pwd, salary 못 보게 하고싶을 때
```
CREATE VIEW user_view AS
SELECT id, name, email
FROM user;
```
이렇게 READ 권한을 조절할 수 있음

2️⃣ 복잡한 쿼리를 단순하게 쓰고 싶을 때
```
SELECT s.name, d.dept_name
FROM student s
JOIN dept d ON s.dept_id = d.id
WHERE d.dept_name = '컴퓨터공학과';
```
-> JOIN이나 서브쿼리가 너무 길 때
```
CREATE VIEW cs_students AS
SELECT s.name, d.dept_name
FROM student s
JOIN dept d ON s.dept_id = d.id;
```
->SELECT문을 cs_students라는 이름으로 등록함
```
SELECT * FROM cs_students WHERE dept_name='컴퓨터공학과';
```
-> 다음부터는 FROM에 등록한 select문을 입력할 수 있음

3️⃣ 사용자마다 다른 화면을 보여줄 때

----

트리거
트리거를 저장해두면 어떤 데이터가 변경될 때 맞물린 테이블을 같이 변경해줌

---
SQL (Structured Query Language)
쿼리 언어들의 묶음

1. DDL
2. DML
3. DCL

4. TCL(트렌지션=트랜잭션 용어)

**접속 시**에 있는 정보를 커밋하기 전 까진 변경된 데이터를 읽을 수 없음
=> 각 트랜잭션은 고립된 정보를 얻을 수 있음
* commit-접속 때부터 지금까지의 변경사항을 저장(실제 테이블에 영향을 줌)
* rollback - 변경사항 되돌림
* savepoint


[mariaDB 함수 참조 사이트](https://mariadb.com/docs/server/reference/sql-functions)